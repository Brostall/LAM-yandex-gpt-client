# Lenin Agro Monitor (LAM)

Система анализа сельскохозяйственных отчетов с использованием YandexGPT.

## Описание

LAM (Lenin Agro Monitor) - это инструмент для автоматизированного анализа текстовых отчетов о сельскохозяйственных операциях. Система использует YandexGPT для извлечения структурированной информации из текстовых сообщений.

## Возможности

- Анализ текстовых сообщений с помощью YandexGPT
- Распознавание сельскохозяйственных операций
- Определение культур и площадей
- Экспорт данных в Excel
- Обработка сокращений и специальных обозначений

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/LAM.git
cd LAM
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` и добавьте необходимые переменные окружения:
```env
YANDEX_SA_KEY_FILE=path/to/service-account-key.json
YANDEX_FOLDER_ID=your-folder-id
```

## Использование

1. Подготовьте сервисный аккаунт Яндекс Облака и получите ключ
2. Укажите путь к файлу ключа и ID каталога в `.env`
3. Запустите приложение:
```bash
python main.py
```

## Формат данных

### Входные данные
Текстовые сообщения в формате:
```
Операция [культура]
По Пу X/Y
Отд N M/Z
```

### Выходные данные
Структурированные данные в формате JSON:
```json
{
    "date": "дд.мм.гггг",
    "records": [
        {
            "subdivision": "название подразделения",
            "operation": "название операции",
            "culture": "название культуры",
            "area_per_day": число,
            "area_from_start": число,
            "harvest_centners": число или null
        }
    ]
}
```

## Требования
- Python 3.8+
- Доступ к Yandex Cloud
- Сервисный аккаунт с необходимыми правами

## Возможные проблемы

1. "Ошибка авторизации":
   - Проверьте правильность ID каталога в `.env`
   - Убедитесь, что файл ключа на месте и имеет правильный формат
   - Проверьте права сервисного аккаунта

2. "Модель недоступна":
   - Убедитесь, что у вас есть платежный аккаунт в Yandex Cloud
   - Проверьте баланс аккаунта

3. "Ошибка при обработке сообщения":
   - Проверьте формат входного сообщения
   - Убедитесь, что все сокращения соответствуют справочнику 